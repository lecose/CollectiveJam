<!DOCTYPE html>
<html>
<body>
<script type="text/javascript" src="./src/webchuck_host.js"></script>

<h1>Interfacing With WebChucK</h1>
<h2>Update a variable</h2>

<input id="startButton" type="button" value="Start ChucK" />
<input id="updateFreq" type="button" value="Update Freq" />

<script>
    var serverFilesToPreload = [
            {
                serverFilename: './interaction-1.ck',
                virtualFilename: 'interaction-1.ck'
            }
        ];
    var startButton = document.getElementById( "startButton" );
    startButton.addEventListener( "click", async function() {
        await preloadFilenames( serverFilesToPreload );
        await startChuck();
        await theChuckReady;
        await theChuck.runFile( "interaction-1.ck" );
        startButton.disabled = true;
    });
    var updateFreqButton = document.getElementById( "updateFreq" );
    updateFreqButton.addEventListener( "click", async function() {
        // Randomize frequency between 220 and 440Hz
        var newFreq = 220.0 + Math.random() * 220.0;
        theChuck.setFloat("freq", newFreq);
        var f = theChuck.getFloat("freq");
        f.then((value) => console.log(value))
    });
</script>
</body>
</html>